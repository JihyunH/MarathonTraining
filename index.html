<!DOCTYPE html>
<html lang="en">
<head>
  
  <meta charset="UTF-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Marathon Training</title>
  
    <head>
      <!--Import Google Icon Font-->
      <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

      <!--Let browser know website is optimized for mobile-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    
    <script src="bower_components/jquery/dist/jquery.js"></script>
      <!-- Compiled and minified CSS -->
      <link rel="stylesheet" href="bower_components/materialize/dist/css/materialize.min.css">

      <!-- Compiled and minified JavaScript -->
      <script src="bower_components/materialize/dist/js/materialize.min.js"></script>
          
      <script type="text/javascript" src="assets/javascript/cleanse.js"></script>
    
    
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">

    <script src="https://www.gstatic.com/firebasejs/3.6.5/firebase.js"></script>


</head>

<body>


<div class="container">

  <div class="row">
    <div class="col s12">
      <nav>
        <div class="nav-wrapper deep-orange">
          <a href="index.html" class="brand-logo">Marathon Training</a>
          <ul id="nav-mobile" class="right hide-on-med-and-down">
            <li><a href="about.html">About</a></li>
            <li><a href="register.html">Register</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="login.html">Login</a></li>
            <li><a target="_blank" href="https://www.fitbit.com/oauth2/authorize?response_type=token&client_id=2283WS&redirect_uri=http%3A%2F%2F127.0.0.1%3A8080%2Findex.html&scope=activity%20heartrate%20location%20profile%20weight&expires_in=604800">Fitbit Login</a></li>
          </ul>
        </div>
      </nav>
        
    </div>
  </div>
</div>

<button id="facebook">Facebook</button>
 <footer class="page-footer black-text transparent">
  <div class="container">
    <div class="row">
      <div class="col l6 s12">
        <h5 class="black-text">Footer Content</h5>
       <!--  <p class="grey-text text-lighten-4">You can use rows and columns here to organize your footer content.</p> -->
      </div>
      <div class="col l4 offset-l2 s12">
        <h5 class="black-text">Links</h5>
        <ul>
          <li><a class="red-text" href="#!">Instagram</a></li>
          <li><a class="red-text" href="#!">YouTube</a></li>
          <li><a class="red-text" href="#!">Facebook</a></li>
          <li><a class="red-text" href="#!">Twitter</a></li>
          <li><a class="red-text" href="#!">Contact</a></li>
          
        </ul>
      </div>
    </div>
  </div>
  
  <div class="footer-copyright black-text transparent">
    <div class="container center">
    Â© 2017 Marathon Training 
    </div>
  </div>
</footer>

<script type="text/javascript">
// Initialize Firebase
  var config = {
    apiKey: "AIzaSyA86KcIckWm_hvCyb8iIqRDB0tkL9q_aZI",
    authDomain: "marathontrainer-c4507.firebaseapp.com",
    databaseURL: "https://marathontrainer-c4507.firebaseio.com",
    storageBucket: "marathontrainer-c4507.appspot.com",
    messagingSenderId: "89102549201"
  };

  firebase.initializeApp(config);
  function facebookLogin(){
var provider = new firebase.auth.FacebookAuthProvider();
provider.addScope('user_birthday');
provider.setCustomParameters({
  'display': 'popup'
});

firebase.auth().signInWithPopup(provider).then(function(result) {
  
  console.log(result);
  // This gives you a Facebook Access Token. You can use it to access the Facebook API.
  var token = result.credential.accessToken;
  // The signed-in user info.
  var user = result.user;


  // ...
}).catch(function(error) {
  // Handle Errors here.
  var errorCode = error.code;
  var errorMessage = error.message;
  // The email of the user's account used.
  var email = error.email;
  // The firebase.auth.AuthCredential type that was used.
  var credential = error.credential;
  // ...
});

}

function logout() {
  firebase.auth().signOut().then(function() {
    // Sign-out successful.
  }, function(error) {
    // An error happened.
  });
}
  $(document).ready(function(){
$("#facebook").on("click", function(){
  facebookLogin();
});


  var params = {}, queryString = location.hash.substring(1),
      regex = /([^&=]+)=([^&]*)/g, m;

  while (m = regex.exec(queryString)) {
    params[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);
  }
  console.log('params', params);


  $.ajax({
    url: 'https://api.fitbit.com/1/user/-/profile.json',
    headers: {
      'Authorization': 'Bearer ' + params.access_token
    },
    success: function(data) {
      console.log('data', data);          
    }
  });
  })

</script>


</body>
</html>